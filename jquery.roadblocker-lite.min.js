!function(e){!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,o={};e<arguments.length;e++){var t=arguments[e];for(var n in t)o[n]=t[n]}return o}function o(t){function n(o,i,r){var s;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},n.defaults,r),"number"==typeof r.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(l){}return i=t.write?t.write(i,o):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),o=o.replace(/[\(\)]/g,escape),document.cookie=[o,"=",i,r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}o||(s={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<c.length;p++){var u=c[p].split("="),f=u.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var h=u[0].replace(d,decodeURIComponent);if(f=t.read?t.read(f,h):t(f,h)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(l){}if(o===h){s=f;break}o||(s[h]=f)}catch(l){}}return s}}return n.set=n,n.get=function(e){return n(e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(o,t){n(o,"",e(t,{expires:-1}))},n.withConverter=o,n}return o(function(){})}),e.fn.roadblocker=function(o,t){var n=null,i=null;"string"==typeof o&&(i=o,o=null),"function"==typeof o&&(n=o,o=null);var r=e.extend({timesPerSession:1,totalTimesToShow:3,waitTime:1e4,ignorePaths:["/"],onShow:n,onClose:t,log:!1},o);return this.each(function(){var o,t,n="roadblocker-permanent",s="roadblocker-session",a="timesDisplayed:",l="neverShow",c=0,d=0,p=Cookies.get(s);if(void 0!=p&&(t=p.replace(s+"=","").replace(/;.*/,""),c=t.match(/timesDisplayed:(\d*)/)[1],c=parseInt(c),!i&&c>=r.timesPerSession))return r.log&&console.log("Maximum times to show per session reached, exiting roadblocker..."),this;var u=Cookies.get(n);if(void 0!=u){if(o=u.replace(n+"=","").replace(/;.*/,""),!i&&u.includes(l))return r.log&&console.log("Permanent cookie has 'never show' flag set, exiting roadblocker..."),this;if(d=o.match(/timesDisplayed:(\d*)/)[1],d=parseInt(d),!i&&d>=r.totalTimesToShow)return r.log&&console.log("Maximum times to show over all time reached, exiting roadblocker..."),this}if(null!=i){if("close-once"==i)return e(this).data&&"function"==typeof e(this).data.onClose&&e(this).data.onClose(),this;if("close-permanently"==i)return Cookies.set(s,t+l),Cookies.set(n,o+l,{expires:3650}),e(this).data&&"function"==typeof e(this).data.onClose&&e(this).data.onClose(),this}for(var f=location.pathname,h=0;h<r.ignorePaths.length;h++)if(r.ignorePaths[h]==f)return r.log&&console.log("Path name matches a name in the ignorePaths list, exiting roadblocker..."),this;return void 0==p&&(p=Cookies.set(s,a+"0"),t=p.replace(s+"=","").replace(/;.*/,"")),void 0==u&&(u=Cookies.set(n,a+"0",{expires:3650}),o=u.replace(n+"=","").replace(/;.*/,"")),"function"==typeof r.onClose&&(e(this).data.onClose=r.onClose),setTimeout(function(){c++,d++,Cookies.set(s,t.replace(/timesDisplayed:\d/,a+c)),Cookies.set(n,o.replace(/timesDisplayed:\d/,a+c),{expires:3650}),null!=r.onShow&&r.onShow()},r.waitTime),this})}}(jQuery);